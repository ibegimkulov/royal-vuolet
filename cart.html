<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—Ä–∑–∏–Ω–∞ | Royal Jewels</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/cart.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;800&family=Poppins:wght@300;500&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">üíé Royal Jewels</div>
            <nav class="nav">
                <ul>
                    <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                    <li><a href="about.html">–û –Ω–∞—Å</a></li>
                    <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                    <li><a href="cart.html" class="active">üõí</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="cart-section">
        <div class="container">
            <h1>–ö–æ—Ä–∑–∏–Ω–∞</h1>
            
            <div class="cart-container">
                <div class="cart-items">
                    <div class="cart-item">
                        <img src="images/ring1.jpg" alt="–ö–æ–ª—å—Ü–æ Royal Gold">
                        <div class="item-details">
                            <h3>–ö–æ–ª—å—Ü–æ Royal Gold</h3>
                            <p class="item-price">15 000 000 —Å—É–º</p>
                            <div class="quantity-controls">
                                <button class="quantity-btn" onclick="changeQuantity(1, -1)">-</button>
                                <span class="quantity" id="quantity-1">1</span>
                                <button class="quantity-btn" onclick="changeQuantity(1, 1)">+</button>
                            </div>
                        </div>
                        <button class="remove-btn" onclick="removeItem(1)">‚úï</button>
                    </div>
                    
                    <div class="cart-item">
                        <img src="images/necklace1.jpg" alt="–û–∂–µ—Ä–µ–ª—å–µ —Å –∏–∑—É–º—Ä—É–¥–æ–º">
                        <div class="item-details">
                            <h3>–û–∂–µ—Ä–µ–ª—å–µ —Å –∏–∑—É–º—Ä—É–¥–æ–º</h3>
                            <p class="item-price">17 000 000 —Å—É–º</p>
                            <div class="quantity-controls">
                                <button class="quantity-btn" onclick="changeQuantity(2, -1)">-</button>
                                <span class="quantity" id="quantity-2">1</span>
                                <button class="quantity-btn" onclick="changeQuantity(2, 1)">+</button>
                            </div>
                        </div>
                        <button class="remove-btn" onclick="removeItem(2)">‚úï</button>
                    </div>
                </div>
                
                <div class="cart-summary">
                    <h3>–ò—Ç–æ–≥–æ</h3>
                    <div class="summary-item">
                        <span>–¢–æ–≤–∞—Ä—ã (2):</span>
                        <span id="subtotal">32 000 000 —Å—É–º</span>
                    </div>
                    <div class="summary-item">
                        <span>–î–æ—Å—Ç–∞–≤–∫–∞:</span>
                        <span>–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
                    </div>
                    <div class="summary-item total">
                        <span>–ö –æ–ø–ª–∞—Ç–µ:</span>
                        <span id="total">32 000 000 —Å—É–º</span>
                    </div>
                    <button class="btn checkout-btn" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </div>
            </div>
            
            <div class="empty-cart" id="empty-cart" style="display: none;">
                <h2>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h2>
                <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</p>
                <a href="catalog.html" class="btn">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Royal Jewels. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            <div class="socials">
                <a href="#">Instagram</a>
                <a href="#">Telegram</a>
                <a href="#">Facebook</a>
            </div>
        </div>
    </footer>

    <script>
        function changeQuantity(itemId, change) {
            const quantityElement = document.getElementById(`quantity-${itemId}`);
            let currentQuantity = parseInt(quantityElement.textContent);
            currentQuantity = Math.max(1, currentQuantity + change);
            quantityElement.textContent = currentQuantity;
            updateTotal();
        }

        function removeItem(itemId) {
            const cartItem = document.querySelector(`[onclick="removeItem(${itemId})"]`).parentElement;
            cartItem.remove();
            updateTotal();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—É—Å—Ç–∞ –ª–∏ –∫–æ—Ä–∑–∏–Ω–∞
            const cartItems = document.querySelectorAll('.cart-item');
            if (cartItems.length === 0) {
                document.querySelector('.cart-container').style.display = 'none';
                document.getElementById('empty-cart').style.display = 'block';
            }
        }

        function updateTotal() {
            const quantities = document.querySelectorAll('.quantity');
            const prices = [15000000, 17000000]; // –¶–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤
            let total = 0;
            
            quantities.forEach((quantity, index) => {
                if (index < prices.length) {
                    total += parseInt(quantity.textContent) * prices[index];
                }
            });
            
            document.getElementById('subtotal').textContent = `${total.toLocaleString()} —Å—É–º`;
            document.getElementById('total').textContent = `${total.toLocaleString()} —Å—É–º`;
        }

        function checkout() {
            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞
            const items = [];
            document.querySelectorAll('.cart-item').forEach(item => {
                items.push({
                    name: item.querySelector('h3').textContent,
                    price: item.querySelector('.item-price').textContent,
                    quantity: item.querySelector('.quantity').textContent
                });
            });
            const total = document.getElementById('total').textContent;

            fetch('https://royal-vuolet-backend.onrender.com/api/order', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ items, total })
            })
            .then(res => res.json())
            .then(data => {
                if (data.ok) {
                    alert('–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ Telegram.');
                } else {
                    alert('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞.');
                }
            });
        }
    </script>
</body>
</html> 